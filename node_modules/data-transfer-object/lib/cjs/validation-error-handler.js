"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.clearValidationErrorHandler = exports.setValidationErrorHandler = exports.onValidationError = void 0;
const validation_error_map_1 = require("./validation-error-map");
/**
 * Register a callback to run whenever a validation fails.
 * @param handler The callback that will receive either an array or a map of validation errors,
 * depending on options.
 * @param opts Options
 */
function setValidationErrorHandler(handler, opts) {
    if (opts?.rawErrors) {
        exports.onValidationError = handler;
        return;
    }
    exports.onValidationError = errors => {
        const errorMap = validation_error_map_1.getValidationErrorMap(errors);
        return handler(errorMap);
    };
}
exports.setValidationErrorHandler = setValidationErrorHandler;
/**
 * Unregisters the callback to run when a validation fails, and uses the default behavior.
 */
function clearValidationErrorHandler() {
    exports.onValidationError = undefined;
}
exports.clearValidationErrorHandler = clearValidationErrorHandler;
